<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>S-Z Malik Chess Game</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        width: 100%;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        padding: 0 7rem;
      }

      .chess_container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
        cursor: move;
         transition: all ease 500ms;
      }

      .black,
      .white,
      .red {
        width: 6rem;
        height: 6rem;
        padding: 0.5rem;
        overflow: hidden;
      }

      .row {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .red {
        background: orange;
        color: black;
        margin: 0.1rem 0;
      }

      .black {
        background: #8b4513;
      }

      .white {
        background: #deb887;
      }

      img {
        width: 100%;
        height: 100%;
        padding: 0.2rem;
        filter: blur(100%);
      }

      .blackLost,
      .whiteLost {
        display: grid;
        grid-template-columns: repeat(2, 1fr);

        align-content: center;
        width: 18rem;
        height: 20rem;
      }
    </style>
  </head>
  <body>
    <div class="blackLost"></div>

    <div class="chess_container">
      <div class="row">
        <div class="black box">
          <img
            src="./img/black/rukh.png"
            title="rukh"
            class="blackPiece"
            id="piece1"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/black/hourse.png"
            class="blackPiece"
            title="hourse"
            id="piece2"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/black/bshop.png"
            class="blackPiece"
            title="bshop"
            id="piece3"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/black/king.png"
            class="blackPiece"
            title="king"
            id="piece4"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/black/queen.png"
            class="blackPiece"
            title="queen"
            id="piece5"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/black/bshop.png"
            class="blackPiece"
            title="bshop"
            id="piece6"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/black/hourse.png"
            class="blackPiece"
            title="hourse"
            id="piece7"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/black/rukh.png"
            class="blackPiece"
            title="rukh"
            id="piece8"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
      </div>

      <div class="row">
        <div class="white box">
          <img
            src="./img/black/pyada.png"
            class="blackPiece"
            title="pyada"
            id="piece9"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/black/pyada.png"
            class="blackPiece"
            title="pyada"
            id="piece10"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/black/pyada.png"
            class="blackPiece"
            title="pyada"
            id="piece11"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/black/pyada.png"
            class="blackPiece"
            title="pyada"
            id="piece12"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/black/pyada.png"
            class="blackPiece"
            title="pyada"
            id="piece13"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/black/pyada.png"
            class="blackPiece"
            title="pyada"
            id="piece14"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/black/pyada.png"
            class="blackPiece"
            title="pyada"
            id="piece15"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/black/pyada.png"
            class="blackPiece"
            title="pyada"
            id="piece16"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
      </div>

      <div class="row">
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
      </div>

      <div class="row">
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
      </div>

      <div class="row">
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
      </div>

      <div class="row">
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
        <div class="white box"></div>
        <div class="black box"></div>
      </div>

      <div class="row">
        <div class="black box">
          <img
            src="./img/white/pyada.png"
            class="whitePiece"
            title="pyada"
            id="piece17"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/white/pyada.png"
            class="whitePiece"
            title="pyada"
            id="piece18"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/white/pyada.png"
            class="whitePiece"
            title="pyada"
            id="piece19"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/white/pyada.png"
            class="whitePiece"
            title="pyada"
            id="piece20"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/white/pyada.png"
            class="whitePiece"
            title="pyada"
            id="piece21"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/white/pyada.png"
            class="whitePiece"
            title="pyada"
            id="piece22"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/white/pyada.png"
            class="whitePiece"
            title="pyada"
            id="piece23"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/white/pyada.png"
            class="whitePiece"
            title="pyada"
            id="piece24"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
      </div>

      <div class="row">
        <div class="white box">
          <img
            src="./img/white/rukh.png"
            class="whitePiece"
            title="rukh"
            id="piece25"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/white/hourse.png"
            class="whitePiece"
            title="hourse"
            id="piece26"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/white/bshop.png"
            class="whitePiece"
            title="bshop"
            id="piece27"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/white/king.png"
            class="whitePiece"
            title="king"
            id="piece28"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/white/queen.png"
            class="whitePiece"
            title="queen"
            id="piece29"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/white/bshop.png"
            class="whitePiece"
            title="bshop"
            id="piece30"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="white box">
          <img
            src="./img/white/hourse.png"
            class="whitePiece"
            title="hourse"
            id="piece31"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
        <div class="black box">
          <img
            src="./img/white/rukh.png"
            class="whitePiece"
            title="rukh"
            id="piece32"
            alt=""
            draggable="true"
            ondragstart="handleBoardPieces(event)"
          />
        </div>
      </div>
    </div>

    <div class="whiteLost"></div>

    <script>
      const board = document.querySelector(".chess_container");
      let isRotated = false;
      
      document.querySelectorAll(".box").forEach((box) => {
        box.addEventListener("dragover", (e) => e.preventDefault());
        box.addEventListener("drop", (e) => {
          const img = e.dataTransfer.getData("piece");
          const piece = document.querySelector(`#${img}`);

          if (box.children.length && box.children[0].className === img) {
            return;
          } else if (
            box.children.length &&
            box.children[0].className !== piece.className
          ) {
            console.log(box.children[0].id);
            const redChild = document.querySelector(`#${box.children[0].id}`);

            const whiteLost = document.querySelector(".whiteLost");
            const blackLost = document.querySelector(".blackLost");

            if (redChild.className.includes("whitePiece")) {
              box.removeChild(redChild);
              const redBox = document.createElement("div");
              redBox.className = "red box";
              redBox.appendChild(redChild);
              whiteLost.appendChild(redBox);

              console.log(redChild);

              box.appendChild(piece);
            } else {
              box.removeChild(redChild);
              const redBox = document.createElement("div");
              redBox.className = "red box";
              redBox.appendChild(redChild);
              blackLost.appendChild(redBox);
              box.appendChild(piece);
            }
          } else if (box.children.length > 0) {
            return;
          } else {
            box.appendChild(piece);
          }

           isRotated = !isRotated;
          board.style.transform = isRotated ? "rotate(180deg)" : "rotate(0deg)";

          document.querySelectorAll(".box").forEach((bx) => {
            bx.style.transform = isRotated ? "rotate(180deg)" : "rotate(0deg)";
          });
        });
      });

      const handleBoardPieces = (e) => {
        e.dataTransfer.setData("piece", e.target.id);
      };
    </script>
  </body>
</html>
